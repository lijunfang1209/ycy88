(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{321:function(s,t){s.exports="data:image/png;base64,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"},322:function(s,t,a){s.exports=a.p+"assets/img/koa_postman.09b0bfde.png"},323:function(s,t,a){s.exports=a.p+"assets/img/koa_postman2.cd51f01d.png"},630:function(s,t,a){"use strict";a.r(t);var n=a(13),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"node清单-搭建koa服务器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#node清单-搭建koa服务器"}},[s._v("#")]),s._v(" Node清单 - 搭建Koa服务器")]),s._v(" "),t("h3",{attrs:{id:"一、使用脚手架初始化项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、使用脚手架初始化项目"}},[s._v("#")]),s._v(" 一、使用脚手架初始化项目")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("脚手架")]),s._v(" "),t("p",[s._v("koa-generator 是一个Koa的脚手架工具。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 安装脚手架")]),s._v("\n$ npm install "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g koa"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("generator \n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 通过脚手架创建初始化项目")]),s._v("\nkoa "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e project          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生成 koa 项目（koa版本为1.x）")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// OR")]),s._v("\nkoa2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e koa2"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("project    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生成 koa 项目（koa版本为2.x）")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 进入项目")]),s._v("\ncd project  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// OR: cd koa2-project")]),s._v("\nnpm install\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 启动项目")]),s._v("\nnpm run dev\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("p",[s._v("出现如图所示，则表示项目初始化OK：\n"),t("img",{attrs:{src:a(321),alt:"An image"}})]),s._v(" "),t("div",{staticClass:"custom-block warning"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("本项目 DEMO 基于koa2，也就是说运行的命令是「 koa2 -e koa2-project 」。")])]),s._v(" "),t("h3",{attrs:{id:"二、优化配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、优化配置"}},[s._v("#")]),s._v(" 二、优化配置：")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ====== 项目初始化配置目录")]),s._v("\nbin             \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v("          \nroutes          \n    index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n    user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\nviews           \n    error"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ejs\n    index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ejs\napp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ====== 调整后的目录结构")]),s._v("\nbin             \nconf                "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// add")]),s._v("\n    db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js           "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定义数据库连接配置信息")]),s._v("\n    mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定义数据库连接")]),s._v("\n    constants"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定义全局常量")]),s._v("\ncontroller          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// add")]),s._v("\n    user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 定义登录请求的查询语句信息")]),s._v("\nutils               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// add")]),s._v("\n    cryp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 加密工具")]),s._v("\nmodel               "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// add")]),s._v("\n    resModel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js     "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 设置响应的通用model")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v("\nroutes\n    index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n    user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\nviews\n    error"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ejs\n    index"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ejs\napp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("json\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br")])]),t("p",[s._v("上述文件夹和文件定义好后，需要安装对应的依赖，并完善文件代码内容\n第一步： 安装依赖")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 安装依赖")]),s._v("\n$ npm i mysql xss jsonwebtoken\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("第二步：完善文件代码")]),s._v(" "),t("p",[s._v("2.1 conf/db.js")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.1 conf/db.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" env "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" process"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("NODE_ENV")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYSQL_CONF")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("env "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dev'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYSQL_CONF")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("host")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'localhost'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'root'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("password")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'password'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3306'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("database")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'yuanbo_web'")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("env "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'production'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYSQL_CONF")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYSQL_CONF")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("p",[s._v("2.2 conf/mysql.js")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.2 conf/mysql.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" mysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mysql'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYSQL_CONF")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./db'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" con "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createConnection")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYSQL_CONF")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 开始连接数据库")]),s._v("\ncon"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("connect")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("sql")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" promise "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Promise")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("resolve"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" reject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    con"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("query")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" result")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("reject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("result"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" promise\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  exec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("escape")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("escape\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("2.3 conf/constants.js")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.3 conf/constants.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SECRET_KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'bobo_1022#'")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SECRET_KEY")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("2.4 controller/user.js")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.4 controller/user.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" exec"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" escape "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../conf/mysql'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" genPassword "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../utils/cryp'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 登录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("logIn")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("loginData")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("escape")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("loginData"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生成加密密码")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("genPassword")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("loginData"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  password "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("escape")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" sql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("SELECT username, realname FROM users WHERE username=")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v(" AND password=")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" rows "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("exec")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" rows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 退出登录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("logOut")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("logoutData "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  logIn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  logOut\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("p",[s._v("2.5 utils/cryp.js")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.5 utils/cryp.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" crypto "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'crypto'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SECRET_KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../conf/constants'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("md5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("content")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" md5 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" crypto"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("createHash")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'md5'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" md5"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("update")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("content"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("digest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hex'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("genPassword")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("passsword")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" str "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("password=")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("passsword"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("&key=")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SECRET_KEY")]),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("md5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("str"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  genPassword\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("2.6 model/resModel.js")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2.6 model/resModel.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BaseModel")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("typeof")]),s._v(" data "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'string'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" data\n      data "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n      message "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("data "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" data\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("message "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" message\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SuccessModel")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BaseModel")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("super")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("code "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ErrorModel")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("BaseModel")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("constructor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("super")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" message"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("code "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  SuccessModel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  ErrorModel\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br")])]),t("h3",{attrs:{id:"三、完善请求路由-以-login-为例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、完善请求路由-以-login-为例"}},[s._v("#")]),s._v(" 三、完善请求路由（以 /login 为例）：")]),s._v(" "),t("div",{staticClass:"custom-block danger"},[t("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),t("p",[s._v("/users/login 以 mock 模拟方式处理，可以通过 Postman 来验证模拟的请求结果。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// routes/user.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" router "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'koa-router'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" logIn"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" logOut "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../controller/user'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" SuccessModel"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" ErrorModel "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../model/resModel'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// const loginCheck = require('../middleware/loginCheck')")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" jwt "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'jsonwebtoken'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SECRET_KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'../conf/constants'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nrouter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("prefix")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/users'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 登录")]),s._v("\nrouter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("post")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/login'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" body "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("body"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("||")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("body"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("password"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ErrorModel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'字段缺失'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ====== mock 模拟方式")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" payload "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getTime")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("timeout")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" token "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" jwt"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sign")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("payload"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SECRET_KEY")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("expiresIn")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'7d'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n    ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SuccessModel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("username")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" body"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("username"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("msg")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'恭喜您，成功登录'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      token\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ====== 调用 mysql 方式")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// const data = await logIn(body)")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// if (data.username) {")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   let payload = {time:new Date().getTime(), timeout: 1000 * 60 * 60 * 2}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   const token = jwt.sign(payload, SECRET_KEY, {expiresIn: '7d'})")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   data.token = token")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   // 设置session")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   ctx.session.username = data.username")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   ctx.session.realname = data.realname")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   ctx.body = new SuccessModel(data)")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//   return")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// }")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ctx.body = new ErrorModel('登录失败')")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 退出登录")]),s._v("\nrouter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("post")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/logout'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("async")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" next")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" body "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" data "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("logOut")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("body"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("session "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v("\n  ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("body "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SuccessModel")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nmodule"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exports "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" router\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br")])]),t("p",[t("img",{attrs:{src:a(322),alt:"An image"}})]),s._v(" "),t("p",[s._v("如果没有传递完整的字段值：")]),s._v(" "),t("p",[t("img",{attrs:{src:a(323),alt:"An image"}})]),s._v(" "),t("p",[s._v("DEMO源码："),t("br"),s._v(" "),t("a",{attrs:{href:"https://github.com/bobo88/project-basis/tree/main/koa2-project",target:"_blank"}},[s._v("DEMO -- Koa2")]),t("br")])])}),[],!1,null,null,null);t.default=e.exports}}]);