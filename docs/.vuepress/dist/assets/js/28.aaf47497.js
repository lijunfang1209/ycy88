(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{327:function(s,n,t){s.exports=t.p+"assets/img/lifecycle_react_old.cc88af98.jpeg"},328:function(s,n,t){s.exports=t.p+"assets/img/lifecycle_react_new.374791b1.jpg"},650:function(s,n,t){"use strict";t.r(n);var e=t(13),a=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"react清单-生命周期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#react清单-生命周期"}},[s._v("#")]),s._v(" React清单 - 生命周期")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("生命周期")]),s._v(" "),n("p",[s._v("Mounting(挂载)：已插入真实 DOM "),n("br"),s._v("\nUpdating(更新)：正在被重新渲染 "),n("br"),s._v("\nUnmounting(卸载)：已移出真实 DOM "),n("br")])]),s._v(" "),n("h3",{attrs:{id:"一、旧的生命周期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、旧的生命周期"}},[s._v("#")]),s._v(" 一、旧的生命周期：")]),s._v(" "),n("p",[n("img",{attrs:{src:t(327),alt:"An image"}})]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 挂载")]),s._v("\nconstructor\ncomponentWillMount\nrender\ncomponentDidMount\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 更新")]),s._v("\ncomponentWillReceiveProps\nshouldComponentUpdate\ncomponentWillUpdate\nrender\ncomponentDidUpdate\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 卸载")]),s._v("\ncomponentWillUnmount\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"二、新的生命周期"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、新的生命周期"}},[s._v("#")]),s._v(" 二、新的生命周期：")]),s._v(" "),n("p",[n("img",{attrs:{src:t(328),alt:"An image"}})]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 挂载")]),s._v("\nconstructor\ngetDerivedStateFromProps\nrender\ncomponentDidMount\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 更新")]),s._v("\ngetDerivedStateFromProps\nshouldComponentUpdate\nrender\ngetSnapshotBeforeUpdate\ncomponentDidUpdate\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 卸载")]),s._v("\ncomponentWillUnmount\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"三、新旧生命周期对比"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、新旧生命周期对比"}},[s._v("#")]),s._v(" 三、新旧生命周期对比")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 挂载")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 旧 ------------------------------- 新")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// constructor                      constructor                 // 相同")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// componentWillMount               getDerivedStateFromProps    // 不同")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// render                           render                      // 相同")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// componentDidMount                componentDidMount           // 相同")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 更新")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 旧 ------------------------------- 新")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// componentWillReceiveProps        getDerivedStateFromProps    // 不同")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// shouldComponentUpdate            shouldComponentUpdate       // 相同")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// componentWillUpdate                                          // 不同")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// render                           render                      // 相同")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//                                  getSnapshotBeforeUpdate     // 不同")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// componentDidUpdate               componentDidUpdate          // 相同")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 卸载")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// componentWillUnmount             componentWillUnmount        // 相同")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("得出结论：React从v16.3开始废弃 componentWillMount componentWillReceiveProps componentWillUpdate 三个钩子函数（三个带 Will 的）。")]),s._v(" "),n("h3",{attrs:{id:"四、父子组件生命周期的执行顺序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、父子组件生命周期的执行顺序"}},[s._v("#")]),s._v(" 四、父子组件生命周期的执行顺序")]),s._v(" "),n("p",[s._v("以 React 18 为例，结合上面的 新的生命周期 图来分析：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 父子组件初始化")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： constructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： getDerivedStateFromProps")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： render")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： constructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： getDerivedStateFromProps")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： render")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： componentDidMount")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： componentDidMount")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 子组件修改自身状态 state")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child 组件： getDerivedStateFromProps")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child 组件： shouldComponentUpdate")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child 组件： render")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child 组件： getSnapshotBeforeUpdate")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child 组件： componentDidUpdate")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 修改父组件中传入子组件的 props")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： getDerivedStateFromProps")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： shouldComponentUpdate")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： render")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： getDerivedStateFromProps")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： shouldComponentUpdate")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： render")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： getSnapshotBeforeUpdate")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： getSnapshotBeforeUpdate")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： componentDidUpdate")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： componentDidUpdate")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 卸载子组件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： getDerivedStateFromProps")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： shouldComponentUpdate")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： render")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： getSnapshotBeforeUpdate")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： componentWillUnmount")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： componentDidUpdate")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. 重新挂载子组件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： getDerivedStateFromProps")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： shouldComponentUpdate")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： render")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： constructor")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： getDerivedStateFromProps")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： render")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： getSnapshotBeforeUpdate")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Child  组件： componentDidMount")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Parent 组件： componentDidUpdate")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br")])]),n("p",[s._v("父子组件生命周期执行顺序总结：")]),s._v(" "),n("ul",[n("li",[s._v("当子组件自身状态改变时，不会对父组件产生副作用的情况下，父组件不会进行更新，即不会触发父组件的生命周期")]),s._v(" "),n("li",[s._v("当父组件中状态发生变化（包括子组件的挂载以及卸载）时，会触发自身对应的生命周期以及子组件的更新\n"),n("ul",[n("li",[s._v("render 以及 render 之前的生命周期，则 父组件先执行")]),s._v(" "),n("li",[s._v("render 以及 render之后的声明周期，则子组件先执行，并且是与父组件交替执行")]),s._v(" "),n("li",[s._v("当子组件进行卸载时，只会执行自身的 componentWillUnmount 生命周期，不会再触发别的生命周期")])])])]),s._v(" "),n("p",[s._v("DEMO验证："),n("br"),s._v(" "),n("a",{attrs:{href:"https://ycy88.com/other",target:"_blank"}},[s._v("父子组件生命周期的执行顺序")]),n("br")]),s._v(" "),n("p",[s._v("参考："),n("br"),s._v(" "),n("a",{attrs:{href:"https://juejin.cn/post/6914112105964634119",target:"_blank"}},[s._v("深入详解React生命周期")]),n("br")])])}),[],!1,null,null,null);n.default=a.exports}}]);