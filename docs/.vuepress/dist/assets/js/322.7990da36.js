(window.webpackJsonp=window.webpackJsonp||[]).push([[322],{711:function(s,t,a){"use strict";a.r(t);var n=a(13),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"vite的简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vite的简介"}},[s._v("#")]),s._v(" Vite的简介")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("Vite")]),s._v(" "),t("p",[s._v("下一代的前端工具链")])]),s._v(" "),t("p",[t("em",[s._v("特点：")])]),s._v(" "),t("ul",[t("li",[t("em",[s._v("极速的服务启动")]),s._v(" "),t("ul",[t("li",[t("em",[s._v("使用原生 ESM 文件，无需打包!")])])])]),s._v(" "),t("li",[t("em",[s._v("轻量快速的热重载")]),s._v(" "),t("ul",[t("li",[t("em",[s._v("无论应用程序大小如何，都始终极快的模块热替换（HMR）")])])])]),s._v(" "),t("li",[t("em",[s._v("丰富的功能")]),s._v(" "),t("ul",[t("li",[t("em",[s._v("对 TypeScript、JSX、CSS 等支持开箱即用。")])])])]),s._v(" "),t("li",[t("em",[s._v("优化的构建")]),s._v(" "),t("ul",[t("li",[t("em",[s._v("可选 “多页应用” 或 “库” 模式的预配置 Rollup 构建")])])])]),s._v(" "),t("li",[t("em",[s._v("通用的插件")]),s._v(" "),t("ul",[t("li",[t("em",[s._v("在开发和构建之间共享 Rollup-superset 插件接口。")])])])]),s._v(" "),t("li",[t("em",[s._v("完全类型化的API")]),s._v(" "),t("ul",[t("li",[t("em",[s._v("灵活的 API 和完整的 TypeScript 类型。")])])])])]),s._v(" "),t("h3",{attrs:{id:"一、vite组成"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、vite组成"}},[s._v("#")]),s._v(" 一、Vite组成")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("一个开发服务器，它基于 原生 ES 模块 提供了 丰富的内建功能，如速度快到惊人的 模块热更新（HMR）。")])]),s._v(" "),t("li",[t("p",[s._v("一套构建指令，它使用 Rollup 打包你的代码，并且它是预配置的，可输出用于生产环境的高度优化过的静态资源。")])])]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("浏览器支持")]),s._v(" "),t("p",[s._v("默认的构建目标是能支持 原生 ESM 语法的 script 标签、原生 ESM 动态导入 和 import.meta 的浏览器。传统浏览器可以通过官方插件 @vitejs/plugin-legacy 支持 。")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vite.config.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" legacy "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@vitejs/plugin-legacy'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("legacy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("targets")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'defaults'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'not IE 11'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"二、vite详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、vite详解"}},[s._v("#")]),s._v(" 二、Vite详解")]),s._v(" "),t("h4",{attrs:{id:"_1-开发环境中为什么用vite"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-开发环境中为什么用vite"}},[s._v("#")]),s._v(" 1. 开发环境中为什么用Vite")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[s._v("当我们构建越来越大型的项目时，基于打包器的方式启动必须抓取并构建你的整个应用，然后启动服务。尤其是热更新（HMR）时，反馈迟钝极大的影响「开发体验」。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("Vite一开始就将应用中的模块分为「依赖」和「源码」两类：")]),s._v(" "),t("ul",[t("li",[s._v("依赖： 采用 esbuild预构建依赖（Go语言编写）。")]),s._v(" "),t("li",[s._v("源码： 采用原生的 ESM方式 加载。")]),s._v(" "),t("li",[s._v("源码模块的请求会根据 304 Not Modified 进行协商缓存，而依赖模块请求则会通过 Cache-Control: max-age=31536000,immutable 进行强缓存，因此一旦被缓存它们将不需要再次请求。")])]),s._v(" "),t("h4",{attrs:{id:"_2-为什么生产环境仍需打包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-为什么生产环境仍需打包"}},[s._v("#")]),s._v(" 2. 为什么生产环境仍需打包")]),s._v(" "),t("p",[s._v("为了在生产环境中获得最佳的加载性能，最好还是将代码进行 tree-shaking、懒加载和 chunk 分割（以获得更好的缓存）。")]),s._v(" "),t("p",[s._v("而 ESBuild 打包目前还不是很成熟（特别是代码分割和 CSS 处理方面），所以 Vite 附带了 Rollup 来进行生产环境的打包工作。")]),s._v(" "),t("h4",{attrs:{id:"_3-构建你的第一个-vite-项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-构建你的第一个-vite-项目"}},[s._v("#")]),s._v(" 3. 构建你的第一个 Vite 项目")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[s._v("$ yarn create vite          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用 yarn")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// OR")]),s._v("\n$ npm create vite@latest    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用 npm")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// OR")]),s._v("\n$ pnpm create vite          "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用 pnpm")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ==> 然后按照提示操作即可！")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h4",{attrs:{id:"_4-vite的功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-vite的功能"}},[s._v("#")]),s._v(" 4. Vite的功能")]),s._v(" "),t("ul",[t("li",[s._v("NPM 依赖解析和预构建： 依赖是强缓存的。")]),s._v(" "),t("li",[s._v("模块热替换")]),s._v(" "),t("li",[s._v("TypeScript：Vite 天然支持引入 .ts 文件。Vite 仅执行 .ts 文件的转译工作，并 不 执行任何类型检查。")]),s._v(" "),t("li",[s._v("VUE：\n"),t("ul",[t("li",[s._v("Vite 为 Vue 提供第一优先级支持：")]),s._v(" "),t("li",[s._v("Vue 3 单文件组件支持：@vitejs/plugin-vue")]),s._v(" "),t("li",[s._v("Vue 3 JSX 支持：@vitejs/plugin-vue-jsx")]),s._v(" "),t("li",[s._v("Vue 2.7 支持：vitejs/vite-plugin-vue2")]),s._v(" "),t("li",[s._v("Vue <2.7 的支持：underfin/vite-plugin-vue2")])])]),s._v(" "),t("li",[s._v("JSX：\n"),t("ul",[t("li",[s._v(".jsx 和 .tsx 文件同样开箱即用。JSX 的转译同样是通过 esbuild。")]),s._v(" "),t("li",[s._v("Vue 用户应使用官方提供的 @vitejs/plugin-vue-jsx 插件，它提供了 Vue 3 特性的支持，包括 HMR，全局组件解析，指令和插槽。")])])]),s._v(" "),t("li",[s._v("CSS：\n"),t("ul",[t("li",[s._v("@import 内联和变基")]),s._v(" "),t("li",[s._v("PostCSS")]),s._v(" "),t("li",[s._v("CSS Modules")]),s._v(" "),t("li",[s._v("CSS 预处理器"),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// # .scss and .sass")]),s._v("\nnpm add "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v(" sass\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// # .less")]),s._v("\nnpm add "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v(" less\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// # .styl and .stylus")]),s._v("\nnpm add "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v(" stylus\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])])]),s._v(" "),t("li",[s._v("静态资源处理")]),s._v(" "),t("li",[s._v("JSON")]),s._v(" "),t("li",[s._v("Glob 导入\n"),t("ul",[t("li",[s._v("Vite 支持使用特殊的 import.meta.glob 函数从文件系统导入多个模块：")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" modules "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("meta"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("glob")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./dir/*.js'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[s._v("动态导入"),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" module "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("await")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("./dir/")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("${")]),s._v("file"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[s._v("}")])]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v(".js")]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[s._v("WebAssembly")]),s._v(" "),t("li",[s._v("Web Workers")])]),s._v(" "),t("h4",{attrs:{id:"_5-vite使用插件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-vite使用插件"}},[s._v("#")]),s._v(" 5. Vite使用插件")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 添加一个插件")]),s._v("\n$ npm add "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("D")]),s._v(" @vitejs"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("plugin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("legacy\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// vite.config.js")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" legacy "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@vitejs/plugin-legacy'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" defineConfig "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'vite'")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("defineConfig")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("plugins")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("legacy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("targets")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'defaults'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'not IE 11'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("h3",{attrs:{id:"三、vite实战"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、vite实战"}},[s._v("#")]),s._v(" 三、Vite实战")]),s._v(" "),t("h3",{attrs:{id:"四、踩坑笔记"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、踩坑笔记"}},[s._v("#")]),s._v(" 四、踩坑笔记")]),s._v(" "),t("p",[s._v("参考："),t("br"),s._v(" "),t("a",{attrs:{href:"https://cn.vitejs.dev/",target:"_blank"}},[s._v("Vite 中文官网")]),t("br")])])}),[],!1,null,null,null);t.default=e.exports}}]);