(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{401:function(s,t,a){s.exports=a.p+"assets/img/vue3VSvue2.1213a8f6.png"},765:function(s,t,a){"use strict";a.r(t);var n=a(13),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"vue清单-vue3与vue2对比"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue清单-vue3与vue2对比"}},[s._v("#")]),s._v(" VUE清单 - vue3与vue2对比")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("VUE 概念")]),s._v(" "),t("p",[s._v("一款用于构建用户界面的 JavaScript 框架，渐进式框架。")])]),s._v(" "),t("p",[s._v("注意：【用新不用旧】老旧项目用 vue2 开发的能重构尽量重构，新项目一律用 vue3。")]),s._v(" "),t("p",[s._v("VUE3 和 VUE2 的差异性主要体现在：")]),s._v(" "),t("ul",[t("li",[s._v("生命周期钩子函数")]),s._v(" "),t("li",[s._v("底层封装")]),s._v(" "),t("li",[s._v("TS的支持度")]),s._v(" "),t("li",[s._v("打包体积")]),s._v(" "),t("li",[s._v("SSR渲染优化")]),s._v(" "),t("li",[s._v("事件侦听器缓存")]),s._v(" "),t("li",[s._v("支持多根节点组件")]),s._v(" "),t("li",[s._v("......")])]),s._v(" "),t("h3",{attrs:{id:"一、生命周期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、生命周期"}},[s._v("#")]),s._v(" 一、生命周期")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// VUE2 和 VUE3 生命周期对比")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Vue2 ----------- vue3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// beforeCreate  -> setup()")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// created       -> setup()")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// beforeMount   -> onBeforeMount")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// mounted       -> onMounted")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// beforeUpdate  -> onBeforeUpdate")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// updated       -> onUpdated")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// beforeDestroy -> onBeforeUnmount")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// destroyed     -> onUnmounted")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// activated     -> onActivated")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// deactivated   -> onDeactivated")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// errorCaptured -> onErrorCaptured")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[s._v("详见："),t("a",{attrs:{href:"/vue/VUE清单 - 生命周期.html"}},[s._v("VUE清单 - 生命周期")])]),s._v(" "),t("h3",{attrs:{id:"二、底层封装-重点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、底层封装-重点"}},[s._v("#")]),s._v(" 二、底层封装（重点）")]),s._v(" "),t("ul",[t("li",[s._v("【双向数据绑定】")])]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 【双向数据绑定】 - 底层监听原理")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ====== vue2: Object.defineProperty( )")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 只能响应首次渲染时候的属性，未声明的数据 未被劫持，所以无法触发视图的更新")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 不能监听数组的变化： Array型数据还是在getter中收集依赖， setter 本质是通过「重写」操作Array的方法")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 重写：push()，pop()，shift()，unshift()，splice()，sort()，reverse()")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 必须遍历对象的每个属性，必须深层遍历嵌套的对象")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 原理：利用Object.defineProperty()， Observer遍历data每个属性通过defineReactive方法劫持data每个属性的getter和setter。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对应的补丁API：Vue.set / Vue.delete（vm.$set / vm.$delete）")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ====== vue3: Proxy")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. Proxy的配置项有13种，可以做更细致的事情")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. Proxy 是一个对象，它包装了另一个对象，并允许你拦截对该对象的任何交互。")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. 拦截对象中任意属性的变化, 包括：属性值的读写、属性的添加、属性的删除等")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. 局限性：不兼容IE")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" person "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Proxy")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" propKey")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("propKey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" propKey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" value")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("propKey"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" value"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nperson"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Bob 大帅哥'")]),s._v("\nconsole"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'person.name: '")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" person"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("ul",[t("li",[s._v("【Diff 算法】的提升")])]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 【Diff 算法】的提升 --\x3e")]),s._v("\nvue2.x: 虚拟dom是全量的对比\n\nvue3: 新增【静态标记（patchflag）】\n+ 只对比带有patch flag的节点（动态数据所在的节点）\n+ 减少了资源的损耗\n\n【hoistStatic 静态提升】\n+ vue2 无论元素是否参与更新，每次都会重新创建然后再渲染\n+ vue3 对于不参与更新的元素，会做静态提升，只会被创建一次，在渲染时直接复用即可。\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("ul",[t("li",[s._v("【Composition API】")])]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 【Composition API】 --\x3e")]),s._v("\nvue2.x: 【Option API风格】\n+ 不足：逻辑分散，项目文件较大时，维护开发难度变大\n\nvue3: 【Composition API风格】\n+ 可以更好的实现高内聚，低耦合，代码逻辑更清晰\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("ul",[t("li",[s._v("【mixins更改】")])]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("\x3c!-- 【mixins更改】 --\x3e")]),s._v("\nvue2.x: 【mixins】\n+ mixins的生命周期比组件快\n+ 变量来源不明确，不利于阅读\n+ 多个mixins可能导致冲突，比如都定义了 this.name 作为属性\n\nvue3: 自定义hooks\n+ 高内聚，低耦合\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"三、ts的支持度"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、ts的支持度"}},[s._v("#")]),s._v(" 三、TS的支持度")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[s._v("vue2.x: 部分支持类型检查\n\nvue3: 全面拥抱TS\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"四、优化打包体积"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#四、优化打包体积"}},[s._v("#")]),s._v(" 四、优化打包体积")]),s._v(" "),t("p",[s._v("基于 webpack / rollup 等打包工具，可以实现【tree-shaking】，将打包体积缩小。")]),s._v(" "),t("p",[s._v("具体原因是：")]),s._v(" "),t("div",{staticClass:"language-html line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-html"}},[t("code",[s._v("vue2.x: \n很多函数都挂载在全局Vue对象上，会增加打包体积（如果某些函数不用的情况下）\n\nvue3: \n所有的API都通过 【ES6模块化】 的方式引入，可以通过webpack/rollup 进行打包优化 剔除【未使用到的API】\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"五、其他"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#五、其他"}},[s._v("#")]),s._v(" 五、其他")]),s._v(" "),t("p",[t("img",{attrs:{src:a(401),alt:"An image"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);