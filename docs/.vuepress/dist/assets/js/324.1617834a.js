(window.webpackJsonp=window.webpackJsonp||[]).push([[324],{713:function(s,t,a){"use strict";a.r(t);var n=a(13),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"pm2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pm2"}},[s._v("#")]),s._v(" PM2")]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("PM2")]),s._v(" "),t("p",[s._v("NODE.JS 的高级生产流程管理器。"),t("br"),s._v("\nPM2 是一个守护进程管理器，它将帮助您管理和保持您的应用程序 24/7 在线。")])]),s._v(" "),t("h3",{attrs:{id:"pm2-能解决什么问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pm2-能解决什么问题"}},[s._v("#")]),s._v(" PM2 能解决什么问题？")]),s._v(" "),t("p",[s._v("我们的线上Node项目，可以通过 "),t("code",[s._v("node app")]),s._v(" 来启动，但是一旦报错就可能直接导致整个服务崩溃。")]),s._v(" "),t("p",[s._v("所以我们需要有一个工具来管理 Node项目， 让它能实现如性能监控、自动重启、负载均衡等功能。")]),s._v(" "),t("p",[s._v("PM2 包含一个自动负载均衡器。")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 安装")]),s._v("\n$ npm install pm2 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"pm2-的常见命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pm2-的常见命令"}},[s._v("#")]),s._v(" PM2 的常见命令")]),s._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 运行某个项目")]),s._v("\n$ pm2 start app"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("js\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 监控所有启动的进程")]),s._v("\n$ pm2 monit\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ======= 微服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 列出所有进程：")]),s._v("\n$ pm2 list         "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 显示所有进程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对进程进行操作")]),s._v("\n$ pm2 stop "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 停止进程")]),s._v("\n$ pm2 restart "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 重启进程")]),s._v("\n$ pm2 "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("delete")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 删除进程")]),s._v("\n$ pm2 reload all   "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 重载所有进程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 日志操作")]),s._v("\n$ pm2 logs "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("**")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n$ pm2 flush       "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 清空所有日志")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// [**]里面可以传入 id值 或 all")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// all对所有进程采取行动")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// id作用于特定的进程 ID")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ====== 如何更新 PM2")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. 安装最新的 pm2 版本：")]),s._v("\n$ npm install pm2@latest "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. 然后更新内存中的 PM2 ：")]),s._v("\n$ pm2 update\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br")])]),t("p",[s._v("参考地址："),t("br"),s._v(" "),t("a",{attrs:{href:"https://pm2.keymetrics.io/",target:"_blank"}},[s._v("PM2官网")]),s._v(" "),t("br"),s._v(" "),t("a",{attrs:{href:"https://www.npmjs.com/package/pm2",target:"_blank"}},[s._v("PM2 npm地址")]),s._v(" "),t("br")])])}),[],!1,null,null,null);t.default=e.exports}}]);